# ⚠️ 物品拾取的限制说明

## 🔍 核心问题：无法识别未鉴定的暗金装备

### 暗黑2物品机制

**未鉴定状态**：
```
掉落时的暗金装备显示：
❌ 不显示真实名称（如"Harlequin Crest"）
✅ 只显示基础类型（如"Shako"、"War Belt"、"Diadem"）
✅ 显示暗金颜色（深棕色/金色文字）
```

**鉴定后才能看到**：
```
鉴定后：
✅ "Harlequin Crest" (小丑帽)
✅ "Arachnid Mesh" (蜘蛛网腰带)
✅ "Death's Fathom" (死神之喉)
```

### 程序的限制

**只能识别**：
- ✅ 物品颜色（暗金/绿装/符文/亮黄）
- ✅ 物品位置（屏幕坐标）
- ✅ 物品大致大小（检测区域面积）

**无法识别**：
- ❌ 未鉴定物品的真实名称
- ❌ 物品的具体属性
- ❌ 物品的价值高低

## 💡 实际解决方案

### 方案1: 拾取所有暗金（推荐）✅

```json
{
  "pickup": {
    "item_types": ["unique", "rune"],
    "filter": {
      "pickup_all_uniques": true,
      "pickup_all_runes": true
    }
  }
}
```

**优点**：
- ✅ 不会错过任何高价值装备
- ✅ 简单可靠
- ✅ 适合MF刷怪

**缺点**：
- ⚠️ 会拾取低价值暗金
- ⚠️ 背包满得快
- ⚠️ 需要手动鉴定和筛选

**效果**：
```
[INFO] 检测到 8 个物品
[INFO] 拾取物品 1 [暗金]: (920, 385)  ← 未知，可能是好东西
[INFO] 拾取物品 2 [符文]: (960, 400)
[INFO] 拾取物品 3 [暗金]: (1000, 410) ← 未知，可能是垃圾
[INFO] 拾取完成: 3/8 个物品
```

---

### 方案2: 只拾取符文

```json
{
  "pickup": {
    "item_types": ["rune"],  // 只拾取符文
    "filter": {
      "pickup_all_runes": false,
      "min_rune_level": "Io"  // 只要Io及以上
    }
  }
}
```

**优点**：
- ✅ 符文价值稳定
- ✅ 占用空间小
- ✅ 不需要鉴定

**缺点**：
- ❌ 放弃所有暗金装备
- ❌ 可能错过神器

**适用场景**：
- 专门刷符文
- 背包空间有限
- 只要稳定收益

---

### 方案3: 启发式过滤（不推荐）⚠️

```json
{
  "pickup": {
    "filter": {
      "pickup_all_uniques": false,
      "filter_by_size": true,
      "skip_small_items": false,  // 不跳过小物品（戒指、项链）
      "skip_large_items": true    // 跳过大物品（某些护甲）
    }
  }
}
```

**原理**：根据检测区域大小猜测物品类型
```
小区域 (< 100像素)  → 可能是戒指、项链、护身符
中区域 (100-5000)   → 可能是武器、头盔、靴子
大区域 (> 5000像素) → 可能是护甲、盾牌
```

**问题**：
- ❌ 非常不准确
- ❌ 可能跳过神器（如SOJ是"小物品"）
- ❌ 检测大小受多种因素影响

**不推荐使用！**

---

## 🎯 推荐策略

### 新手/日常刷怪
```json
{
  "item_types": ["unique", "rune"],
  "filter": {
    "pickup_all_uniques": true,
    "pickup_all_runes": true
  }
}
```
- 拾取所有暗金和符文
- 定期回城鉴定和出售

### 追求效率
```json
{
  "item_types": ["unique", "rune"],
  "filter": {
    "pickup_all_uniques": true,
    "pickup_all_runes": false,
    "min_rune_level": "Mal"  // 只要高级符文
  }
}
```
- 拾取所有暗金（说不定就是神器）
- 只拾取Mal及以上符文

### 只要符文
```json
{
  "item_types": ["rune"],
  "filter": {
    "pickup_all_runes": false,
    "min_rune_level": "Io"
  }
}
```
- 完全放弃暗金
- 背包永远不满

---

## 🔬 未来可能的改进方案

### 方案A: OCR文字识别
**原理**：截图物品名称区域，OCR识别基础类型

**问题**：
- 只能识别基础类型（"Shako"），不是真实名称（"Harlequin Crest"）
- 仍然无法判断价值
- 速度慢，影响效率

**结论**：意义不大

---

### 方案B: 模式识别 + 统计
**原理**：根据Pindle掉落概率统计

```
Pindle常见暗金：
- 高价值：Harlequin Crest (2%), Arachnid Mesh (3%)
- 低价值：Tarnhelm (15%), Peasant Crown (10%)
```

**策略**：
- 拾取所有，回城鉴定
- 统计哪些值得留
- 下次调整策略

**结论**：需要手动参与

---

### 方案C: 游戏内存读取（不推荐）
**原理**：读取游戏内存，获取物品真实ID

**问题**：
- ⚠️ 高风险，容易被检测
- ⚠️ 可能导致封号
- ⚠️ 违反游戏条款

**结论**：绝不推荐

---

## 📊 实际效率对比

### Pindle刷100次统计（假设数据）

| 策略 | 拾取暗金数 | 高价值 | 低价值 | 符文 | 回城次数 |
|------|------------|--------|--------|------|----------|
| 全拾取 | 45 | 8 | 37 | 23 | 5 |
| 只符文 | 0 | 0 | 0 | 23 | 1 |

**分析**：
- 全拾取：需要5次回城，但获得8个高价值暗金
- 只符文：效率高，但错过8个神器

**建议**：
- 前期：全拾取（积累财富）
- 中期：全拾取（仍需装备）
- 后期：看个人选择

---

## ✅ 最终建议

**当前最优配置**：
```json
{
  "pickup": {
    "item_types": ["unique", "rune"],
    "filter": {
      "enabled": true,
      "pickup_all_uniques": true,   // 拾取所有暗金
      "pickup_all_runes": true,     // 拾取所有符文
      "min_rune_level": "Io"        // 可选：只要Io+
    }
  }
}
```

**手动管理**：
1. 每刷30-50次回城
2. 鉴定所有暗金
3. 留下高价值，卖掉低价值
4. 定期整理背包

**记住**：
- ⚠️ 未鉴定 = 无法判断价值
- ✅ 拾取所有 = 不错过神器
- 🎮 手动筛选 = 必要的过程

**这就是D2R MF的真实体验！** 💎
